// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var current_spot, pie, r, set_spot, spot_links, spots;
    $('.slider h2 a').click(function() {
      $('.slider li').removeClass('show');
      $(this).parents('li').addClass('show');
      return false;
    });
    spots = $('body').children('header, section');
    spot_links = $('nav a');
    current_spot = $(spot_links[0]);
    set_spot = function(spot) {
      if (spot !== current_spot) {
        spot_links.removeClass('current');
        spot.addClass('current');
        return current_spot = spot;
      }
    };
    $(document).scroll(function(e) {
      var current_line, nav_link, spot, view3, _i, _len, _results;
      view3 = $(window).innerHeight() / 3;
      current_line = $(document).scrollTop();
      _results = [];
      for (_i = 0, _len = spots.length; _i < _len; _i++) {
        spot = spots[_i];
        if ((spot.offsetTop + $(spot).height() - view3) > current_line) {
          nav_link = $('nav a[href=#' + spot.id + ']');
          set_spot($(nav_link));
          break;
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    });
    $('nav a').scrollTo();
    r = Raphael('pie', '100%', '100%');
    r.setViewBox(0, 0, 640, 360, true);
    pie = r.piechart(180, 180, 160, [37, 32, 19, 7, 5], {
      legend: ['%% Junior Fellow', '%% National Conference', '%% Youth Engagement and Global Engineering', '%% Fair Trade Advocacy', '%% Recruitment/ Administrative'],
      href: ['#overseas-programs', '#national-conference', '#what-we-do', '#fair-trade'],
      legendpos: 'east',
      legendcolor: '#fff',
      strokewidth: 2
    });
    return pie.hover(function() {
      this.sector.stop();
      this.sector.scale(1.1, 1.1, this.cx, this.cy);
      if (this.label) {
        this.label[0].stop();
        this.label[0].attr({
          r: 7.5
        });
        return this.label[1].attr({
          'font-weight': 800
        });
      }
    }, function() {
      this.sector.animate({
        transform: 's1 1 ' + this.cx + ' ' + this.cy
      }, 100, 'ease');
      if (this.label) {
        this.label[0].animate({
          r: 5
        }, 100, 'ease');
        return this.label[1].attr({
          'font-weight': 400
        });
      }
    });
  });

}).call(this);
